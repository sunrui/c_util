# c_util
找到了很多年前写过的代码，怀念那些青涩的时光。

```
2011-9-4

void * my_memccpy(void *dest,const void *src,int c,int count)
{
    while ( count && (*((char *)(dest = (char *)dest + 1) - 1) =
        *((char *)(src = (char *)src + 1) - 1)) != (char)c )
        count--;
    return(count ? dest : NULL);

}

//memset
void *my_memset(void *buffer, int c, int count)
{
    char* p = (char*)buffer;
    while(count--) 
        *p++ = (char)c;
    return buffer;
}

//memcpy
void * my_memcpy(void *dst,const void *src,int count)
{
    void * ret = dst;
    while (count--) 
    {
        *(char *)dst = *(char *)src;
        dst = (char *)dst + 1;
        src = (char *)src + 1;
    }
    return(ret);
}

//memmove
/*
memmove()由src所指定的内存区域赋值count个字符到dst所指定的内存区域。
src和dst所指内存区域可以重叠，但复制后src的内容会被更改。函数返回指向dst的指针。
*/

void * my_memmove(void * dst,const void * src,int count)
{
    void * ret = dst;
    if (dst <= src || (char *)dst >= ((char *)src + count)) 
    {
        while (count--) 
        {
            *(char *)dst = *(char *)src;
            dst = (char *)dst + 1;
            src = (char *)src + 1;
        }
    }
    else 
    {
        dst = (char *)dst + count - 1;
        src = (char *)src + count - 1;
        while (count--) 
        {
            *(char *)dst = *(char *)src;
            dst = (char *)dst - 1;
            src = (char *)src - 1;
        }

    }
    return(ret);
}


char * __cdecl strcpy(char * dst, const char * src)
{
    char * cp = dst;
    while( *cp++ = *src++ )    ;         
    return( dst );
}

char * strcat (char * dst, char * src)
{
    char * cp = dst;
    while( *cp )
      ++cp;   /* Find end of dst */
    while( *cp++ = *src++ )
             /* Copy src to end of dst */
    return( dst );
}

int my_strlen(const char * str )
{
    const char *p = str;
    while( *p++ ) ;
    return( (int)(p - str - 1) );

}

//strcmp
int my_strcmp(const char *string1, const char *string2 )
{
    int ret;
    while(    ( ret=*(unsigned char *)string1++ -*(unsigned char *)string2++)==0 &&   string1  );
    return ret;
}
```

```
18:14 2013/10/30

1. 融合了 luaxml 支持。
2. 融合了 luajson 支持
3. luasocket 多个版本未编译过，2.0.3编译通过但是下载文件 crash 放弃
4. 融合了 luacurl 支持。


已知问题：

5.1.5 版本的 luacurl 下载崩溃, lua xml 支持编译有问题现在解决了。
5.2.2 版本下载没有问题，但是 5.2.2 移除了 table.foreach/getn tag，这会对 lua 开发非常不利。
接入了 cntv 的破解最后一部尝试，发现 lua 使用的正则不是标准的。
和崔艳磊大神交互过，lua 的原生处理字符串能力挺弱，写一个通用到20个站的常用lua的处理库框架挺难。
5.2.2 版本不支持 lua 模块本身静态编译，否则为出现多个 lua 虚拟机的问题，5.1.5 没有问题。


下一步的事情
1. 测试 luaxml 的特性，熟悉 luaxml 的操作，是不是容易满足需求。
2. 测试 luajson 的过程，decode 的对象目前看，转回 lua 的操作遍历都特别困难。
3. luacurl 的下载 5.2.2 可以，但是目前有一些 nil 字符串的问题，待确认。
4. 调研 lua 的面向对象机制，如果将 cntv/sohu 这些的分析放在总的框架中，如果编写通用的 xstm 生成器模块。
5. 目前的扩展基本上根据 lua 本身的代码加 dll 扩展 + xxx.lua 支持的。比如说 xml 的支持就是 lua + dll 共同支持。
   待调研现在编译通过的东西用起来是不是有问题，调研其它的库。
6. 目前自测的 tinylua 一切都在 windows 进行。并没有移植到 linux 平台，待 linux 平台的稳定以后，还需要上到 android 平台。
7. 接合 6 所提到的，如何加入 luajava 的代码框架，提供更舒服的通讯机制需要调研。


大项目：
1. 分析 lua 的源码机制，了解如果将 lua 的动态加载器，变成静态加载器。
2. 分析 lua 的处理文件的机制，如果加入 aes 等加密模块。
3. 为了不对编码造成不爽，尽量不要使用 luajava 将 android 的 api 引入到 lua 里面。因为一旦这样子做，以后的所有调试都必须带一

个 java 工程和手机。
4. 开发出一个完美的 tinylua 的调试器，可以在编写代码的时候，自动用目前裁剪的做兼容性测试。因为不能拿官方的包全的做开发，否则

为识别或者一些兼容问题。
5. 对于上线的机制，tinylua 要有可以自动加密和识别自有加密的功能的工具，因为上线的时候一定是要对 lua 加密的。
6. 分枝，调研 luac 的安全问题，将 lua 的文本的加密和 luac 的预编译加密的取舍目前待调研。
7. 编写 lua 与安卓的真正完整交互接口。以及如果能正确的拿到支持的列表，如何用框架可以自由扩展和识别目前支持的站点。
8. lua 和 java/c 中间件 jni 层的代码编写。
9. 调研未来上线的程序版本检测更新自动更新的能力。

```

```
创建时间：2013年7月24日(星期三) 下午2:46 | 分类：未分类 | 字数：535  | 另存为... | 打印 | 添加到日历
Smallrui  14:39:40
我一定要做智能4景机器人。。。。。。
Smallrui  14:40:07
做在家里用电脑/手机就可以控制他作业，，，挖矿，探测~~
还要做全智能遥控汽车。。。
汽车现在的人工显然还是不够发达。。。
只要鼠标汽车就可以开了。。。要和别人合作。。。
Smallrui  14:41:28
努力，学习，先赚一桶金。。。
薇小球  14:41:47
好，加油！
Smallrui  14:42:33
世界首款，只要按钮就可以驾驶的汽车。。。甚至可以云驾驶，~~屏幕可以看到全景任何方向，而不止是前面和后镜，这么水。。。。

薇小球  14:43:43
中国这交通……
Smallrui  14:44:21
汽车太不智能了，总是出事故，很明显要有自己感应装置，而且要abs结合。。。。为人为已
以后的汽车肯定不是机械式的方向盘的，全部是微操盘，不管你信不信，我要改变。。。。
薇小球  14:45:31
好
Smallrui  14:45:31
当前面突然飞过来东西，或者特别近的时候离自己，要警告，而且四周都要保护。。。
一旦有了钱，才有资本和实力的企业谈合作。。。每次想到这些，我的干劲就十足。
```

```
创建时间：2013年7月12日(星期五) 中午12:03 | 分类：未分类 | 字数：4360  | 另存为... | 打印 | 添加到日历
[广州]小兀(405278485)  11:13:41
你这个又太高级了，我不会
[北京]Smallrui(24170832)  11:13:53
工作线程机制的事件原理，事件机制的事件原理
你返问他，一共 ui 线程和工作线程机制挂起来，内核要至少维护几个线程
[闽A]鹦哥燕舞(513106679)  11:14:54
高深
[广州]小兀(405278485)  11:15:02
这个先别管他懂不懂，我反正是不懂了
为啥主线程就叫做UI线程
[北京]Smallrui(24170832)  11:15:47
你是没有从零做过显示驱动
他充其量也就知道这个概念，背住了
你回答背住的就行
[上海]菜鸟夏(460173380)  11:16:14
你是没有从零做过显示驱动
小瑞做过！！！？？

[广州]小兀(405278485)  11:16:40
我一般不去背那些没用的东西
[北京]Smallrui(24170832)  11:16:49
谁说我也做过了，
[上海]菜鸟夏(460173380)  11:17:00

[北京]Smallrui(24170832)  11:17:34
qt的框架原理就是从 overlay 层封装下来的
qt 的控件都是模拟控件，即使是原生的
所以qt的跨平台是真正意义的无关平台的
[广州]小兀(405278485)  11:18:23
什么叫做模拟控件？
自己画自己处理消息？
[北京]Smallrui(24170832)  11:18:39
对的
windows  下面叫 DirectDraw
直接画。。。
[北京]Smallrui(24170832)  11:20:06
显卡的工作原理，就是 lock overlay 处理叠加 render  unlock
[广州]小兀(405278485)  11:20:09
我也很想搞，不过我怕被人家打一顿
说我自不量力
[北京]Smallrui(24170832)  11:21:50
显卡不知道你的东西是什么样子的模型
他只知道根据你的频率去刷新
像 50fps 60fps
算的过程需要你来做，
但是一般的厂商都会做了像 opengl 的包装
或者上层 directx 特定纹理的包装
[北京]Smallrui(24170832)  11:23:05
例如你现在画一个线在图片上
如果是你常规的做法肯定是 bitmap + line 的 rgb 值，自己叠加
你现在的操作肯定是 cpu 运算，这就 software render
就是微软里面的 gdi
而显卡也有这部分的算法处理，这叫 hardware render 例如 gdi+
[北京]Smallrui(24170832)  11:24:25
所以凡是说 gdi 比 gdi+ 快的一般都是 cpu 比 gpu 强的电脑
传说中的品牌机，基本上都是 cpu 强显卡不强
显卡有很强的浮算运算能力，但是 cpu。。
[广州]小兀(405278485)  11:24:54
原来如此
[北京]Smallrui(24170832)  11:25:00
算了，说多了都是泪，
我不知道和你说什么，你也不知道我说什么，也没有人听我说什么，我说的是什么也不知道
[闽A]鹦哥燕舞(513106679)  11:25:17
你为什么懂这么多。。。你大脑是几T的
[广州]小兀(405278485)  11:25:35
还好啊
这次我居然听懂了
 
[月宫]小白兔(164541092)  11:26:21
小瑞的大脑是在外星栽培的
[北京]Smallrui(24170832)  11:27:19
例如说，你现在要在屏幕上划一个圆，这里面肯定有浮点的处理，像 cos sin 各种东西至少，当然还有傅里叶变换呀，什么离散余弦变换呀的上层的东西，这些的交道如果是拿传统的 cpu 去做，肯定效果极差
[月宫]小白兔(164541092)  11:27:39
你们做什么要用到COS SIN
[北京]Smallrui(24170832)  11:29:04
当然如果有像 x86 的 mmx(amd 和 intel 通用), 后来 inte 的 sse，amd 的 3dNow! 呀, arm 的 neon vfp 呀，他们也会对浮点加速，可是这些都比不上显卡的能力，因为显卡对浮点特殊优化，例如说他可以用查表的变法，或者是高级的 cache 减轻重复运算等
比如说你画一个圆，如果是点阵格，那是你自己点点的小点点，可是这种不能放大，而矢量图正是用余弦做的圆，是真正意义上的圆
[月宫]小白兔(164541092)  11:30:21
你看过几万本书？
[广州]小兀(405278485)  11:30:38
如何画矢量图？
[闽A]鹦哥燕舞(513106679)  11:31:15
你为什么能记住这么多。。
我是看了就忘。。
[月宫]小白兔(164541092)  11:31:36
他照书打的字
[广州]小兀(405278485)  11:31:41
 
[月宫]小白兔(164541092)  11:31:50
现在不说话了。又去翻书了
[闽A]鹦哥燕舞(513106679)  11:32:05

[月宫]小白兔(164541092)  11:32:08
小瑞，别找了。在第469页呢
[北京]Smallrui(24170832)  11:32:17
知道原理了就好办了，下面看显卡给你提供的机制。省过#@$%@##$!，然后呢，你现在知道了画的方法，可是你要处理一些画的处理，怎么和画的方法打交道呢，这又需要一套事件机制原理。就是刚才们在讨论的 ui 线程和工作线程
[闽A]鹦哥燕舞(513106679)  11:32:19

[月宫]小白兔(164541092)  11:32:25
你看。一告诉就打出来了
[广州]小兀(405278485)  11:34:56
虽然说GPU的浮点运算能力很强，可是真不知道在真正的编程中如何看得出来我有用到它的浮点运算
例如，我现在画个圆，也是会在内存中的BIGMAP画好了，然后往DC上面贴
这个画的过程显然不会是在GPU中画的吧
[北京]Smallrui(24170832)  11:37:13
例如说现在要一个纹理的处理办法，显卡厂商说，我现在有一套牛b的东西，直接算出来pai的1万万位，可是有什么用呢，系统不直接没有这个 api，所以显卡厂商也不从入手怎么让系统支持。这时候就会有了新的框架，新的扩展，显卡厂商跟着就可以把 api 给实现了，就是驱动（驱使工作的动动），然后系统内核在执行的时候，首先去探测显卡，显卡告诉你，我是垃圾卡，别调新的 api 处理这东西，系统说，哦，我知道了，然后调用了原始的处理 pai 的办法，根据公式临时算出来。所以这个时候就会出现了，低版本的游戏也能玩，就是速度慢的原因了。当然还有主频的问题，显卡能力的问题，等等问题。。
[深圳]鬼小七(449557841)  11:41:35


幕后浮出水面了
[北京]Smallrui(24170832)  11:44:15
关于为什么微软要用 DC 的问题，这要从一个框架的精力说起，假如你是一个系统框架师，你显然不可能知道显卡厂商的能力也不从调起他们让其来支持你。怎么办呢，做一套软加速就是 HDC device control 就是一套软加速的接口，意思就是让 cpu 就处理 bitmap 和 draw, 而采用的是了基本的绘画原理。

可是后来你牛b，显卡厂商也牛了，想让你支持你们俩互合作互利，怎么办呢，你说，我定义接口吧，你们实现一层就好了，这个时候就会发展到了第二层。
[SZ]路人丁(330201538)  11:46:15

 谁能测试下 是不是对的
[广州]小兀(405278485)  11:47:21
瑞总继续
[北京]Smallrui(24170832)  11:47:38
例如说 usb3.0 规范出来了，微软老大说，你们部门定义接口吧，让厂商去实现 api（其实是驱动） 用户就可以使用了，可是 xp 部门的操了，我靠，现在的接口怎么扩展到 3.0 当初你也没留 reservred 指针啊，接口都改成什么样了，还想支持 3.0，我想存一个标志都没办法，怎么扩展。我现在要支持需要调 xp 一个 api，可是里面也没有啊，只有 win7 提供了，怎么办，微软一看也没办法了，好吧， win xp 宣布不支持了。
[深圳]黑鸟(471512047)  11:49:18
又蹭了一堂瑞总的公益讲座啊
[北京]Smallrui(24170832)  11:51:08
这在 c 语言中是这么组织的，
struct xp
{
   int can_kiss;
}

struct win7
{
   can_kiss
   can_youknow;
}

假如微软把接口定义成了 xp 的，因为当时也不知道会出现 win7，就会出现问题，can_youknow 怎么办， xp 不认识，直接内存报错。

所以会有一个 serverd 在 xp 里面，当 xp 拿到这个变量时，保存了一个叫 can_youknow 的指针，然后处理完以后返回的接口是一样的。
可是现在需求又加了 can_youknow 还不够，因为还要排除 can_youknow_can't_do 的场景，怎么办呢，现在只要有这个反指就好办，在后面接着扩展出来又出来了上面的内容， xp sp2 继承的 xp sp1 的接口，这样子就可以达到完美的兼容。
[北京]Smallrui(24170832)  11:52:54
我的打字很累了，到此结束
[广州]小兀(405278485)  11:53:03
 
现在只要有这个反指就好办，在后面接着扩展出来又出来了上面的内容
这句说的含糊不清啊
[北京]Smallrui(24170832)  11:55:13
struct xp
{
   int can_kiss;
   int reserved;
}

struct xp_sp1
{
  can_kiss
  can_youknow;
 // 意思是这里还要加 reserved ->这样子可以无限递归
}
所有上面的操作前提是返回的函数不动，如果返回的函数也动了，那么 xp 是彻底识别不了了
[北京]Smallrui(24170832)  11:58:06
公益讲座，省着漫总说我没分享代码精神，我认为代码可以自己看，不懂得才是讨论的内容

```

```
创建时间：2013年7月10日(星期三) 下午2:02 | 分类：未分类 | 字数：1850  | 另存为... | 打印 | 添加到日历
宽道  13:55:29
什么项目
Smallrui  13:55:36
监控的
宽道  13:55:47
因为什么原因那
Smallrui  13:57:49
今天去了360，不想说太多，坚持自己的梦想还是去拼搏？？


我们不做设备，但是我们提供最全面的视频监控解决方案。

真正的智能云端监控平台。

统一的前端设备桥接适配器(livezure bridge adapter)，兼容接入目前市面上主流的 dvs, dvr,ipc 等设备。依托插件式的适配器核心很容易适配未来新的硬件。

云转发服务器(livezure relay center)，我们并没有对同一路视频流有转发流数限制，依托动态可增加的转发服务器机组，可以转发上千甚至数万路，前端一处设备，可支持数万终端同时观看。如电脑，电视墙，手机，平板等等。同时自动压力负载均衡，同一转发器机组可以动态自适应多路设备对访问的均衡。

云存储服务器(livezure strange center)，统一集中的监控录像存储管理。我们打破了传统的监控录像的种种弊端，依托 livezure 云存储服务器管理中心，动态可添加的云存储节点，很容易应对多路设备的监控录像需求。例如，我们的监控点在山西某某矿区，而我们的存储服务器中心可以统一设在太原，配备强大的存储服务器机组和依托转发服务器能力，任何录像均可以在任何地方随时查看。

多监控终端的实时监控(livezure terminate client)，电脑pc，手机，平板等终端均可以进行实时监控，管理，回放录像，控制云台旋转等操作。

当然，这一切归功于中心服务器(livezure service center)，所有的前端适配器，存储服务器，终端监控平台等均在中心服务器的协调下工作。同时中心服务器还负责日志管理中心，报警预警管理中心，性能侦测，网络状态侦测等功能。

录像回放中心(livezure replay center)，依托存储服务器和转发服务器，可以在任何终端查看和管理录像回放。例如，银行监控需要查看到底10分钟前发生了什么，道路监控根据出事故时间快速回放，再也不必回到监控录像中心，任何地方只要打开监控终端即可快速访问回放，即使是用最方便的手机。

安全，依托独有的安全网络通信引擎(livezure network rpc engine)，对所有的网络通讯全程加密，再也不用担心授权账户通讯密码安全，控制设备权限违规攻击，网络控制权限泄漏，预警报警不及时等问题。

一键开放授权(livezure one key open session)，通过一键开放授权，可将前端监控设备访问权限公开于公众，任何人通过一个开放地址就可以实时查看。例如，城市道路交通等等。当然这一切也可以一键关闭。

多用户授权中心(livezure account center)，授权一名超级管理除负责整个平台的运作，还可以授权诸多普通用户，针对普通用户的访问录像，实时查看，控制云台等权限，均可以通过超级管理员授权。当然还有，一键授权开放授权。

报警预警(livezure sense warning)，依托中心服务器，可以对监控设备停止，网络通讯故障，存储空间满载等异常进行实时预警，可以通过邮件，前端日志，报警喇叭实时报警。如果中心服务器还连接手机报警中心，则可以通过报警中心的手机像特定的管理员发出报警短信。
呵呵， 这个。。。
宽道  13:58:42
什么原因没搞起来那
Smallrui  13:59:44
模块太多，人力不足。
我自己，一月就算做一个模块出来，也不可能1年内完成。
宽道  14:00:21
你当时找了几个人？
Smallrui  14:00:26
人是很渺少的，不承认不行
就我自己
分布式文件存储回调系统，在线流媒体实时协议/流转发，前端桥接适配器平台，网络底层通讯，PC端界面引擎，移动平台界面引擎，数据库海量民工代码，逻辑层海量民工代码，基础代码设计，报警，sms，通讯，融合接入插件平台，中心服务器，等模型架构设计，还有日志分析，性能图表这些 ui 层的东西
宽道  14:01:18
咋不找几个人一起那
Smallrui  14:01:36
每一块都需要一个非常专业的人去做，而我自己又不可能应付这么多，好多的领域得现学
应该就上面的那一些。
想做成一个项目的话，再多的理由都不是借口，可是失败的现实是很残忍的，不管是什么理由，那不解决问题。

```

```

点击图标 标记为星标记事分布式文件存储回调系统，在线流媒体实时协
创建时间：2013年7月1日(星期一) 晚上7:00 | 分类：未分类 | 字数：148  | 另存为... | 打印 | 添加到日历
分布式文件存储回调系统，在线流媒体实时协议/流转发，前端桥接适配器平台，网络底层通讯，PC端界面引擎，移动平台界面引擎，数据库海量民工代码，逻辑层海量民工代码，基础代码设计，报警，sms，通讯，融合接入插件平台，中心服务器，等模型架构设计
应该是这些了，还有日志分析，性能图表这些 ui 层的东西
```

```
创建时间：2013年6月28日(星期五) 中午11:53 | 分类：未分类 | 字数：5955  | 另存为... | 打印 | 添加到日历
[bj]show me money(879552855) 2013/6/28 11:00:42
小瑞，事件机制是怎么实现的
[上海]菜鸟夏(460173380) 2013/6/28 11:01:34
事件一直在用，虽然比较原始
[bj]show me money(879552855) 2013/6/28 11:02:16
系统是怎么知道事件的发生的呢，然后通知给对象的
[上海]菜鸟夏(460173380) 2013/6/28 11:03:36
我很原始——函数指针
其他问小瑞
[bj]show me money(879552855) 2013/6/28 11:03:52
比如串口，网络事件
[上海]菜鸟夏(460173380) 2013/6/28 11:04:15
你指的是这种，就问小瑞吧，我也好奇
[sz]菜鸟mi(491455335) 2013/6/28 11:04:38
系统的，跟框架的不是一回事
操作系统有中断处理，发生这些事件时会触发中断，然后转给中断处理程序，就抛出事件了。
[sz]菜鸟mi(491455335) 2013/6/28 11:05:43
一般框架的只是一种委托设计，
[广州]小兀(405278485) 2013/6/28 11:06:25
那消息机制高级呢，还是事件高级
[sz]菜鸟mi(491455335) 2013/6/28 11:06:49

 

 

某个时段在需要的时候调用委托，
典型的就是观察者模式来实现。
具体代码就是保存指针或者保存类对象指针和成员函数指针，到点了调用一下

[深圳]飞龙(416363551) 2013/6/28 11:08:03
libuv 里面不就是事件 加 异步. 小瑞不是要大家学习嘛.
[上海]菜鸟夏(460173380) 2013/6/28 11:08:32
好多要看。。。libuv都排到很后面去了
[广州]小兀(405278485) 2013/6/28 11:08:35
我以为是LIBEVENT
[sz]菜鸟mi(491455335) 2013/6/28 11:08:42

消息和事件是不同的机制，没有谁高级一点。
事件一般是本身抛出，对消息感兴趣的就监听，但消息是传递的
[广州]小兀(405278485)  11:09:43
嗯，有道理
[上海]菜鸟夏(460173380)  11:09:59
对了，对于看不通，看不透的知识，你们一般都是这么处理的
[深圳]飞龙(416363551)  11:10:26
抄别人的嘛.

[深圳]鬼小七(449557841)  11:10:40
等不懂就是哪儿的基础知识不够 补了再看
[sz]菜鸟mi(491455335)  11:10:46
除了这个以后，还有扩展，路由。
[上海]菜鸟夏(460173380)  11:11:01
还不知道补哪里
[sz]菜鸟mi(491455335)  11:11:07
看不通，看不透的，要有实践，
[上海]菜鸟夏(460173380)  11:11:12
纯粹是看不懂，我先跳过在说
[sz]菜鸟mi(491455335)  11:11:15
就是自己去验证，不能只量看
只是
[深圳]飞龙(416363551)  11:11:32
先抄别人的,后调试.基本就差不多了.
[上海]菜鸟夏(460173380)  11:11:38
看了一段伪代码，没办法改C代码，我先跳过
[北京]Smallrui(24170832)  11:11:50
迷总总结的很到位，大家都没仔细看
[上海]菜鸟夏(460173380)  11:12:18
看了，一直在用
我先跳过吧，不纠结
[深圳]飞龙(416363551)  11:13:17
我看了libuv 的 IOCP, 好像不是按最大吞吐量设计的.
才一个循环.没用多线程.
[北京]Smallrui(24170832)  11:14:03
飞龙
iocp 本来就一个循环
只是 io 的创建的时候，可以指定系统拿几个线程去通知 io 事件
[深圳]飞龙(416363551)  11:14:44
应是一个线程,有一个循环的.
[北京]Smallrui(24170832)  11:14:56
而且，libuv 默认这个也是 1 个
CreateIOCompletePort 参数是 1
[深圳]飞龙(416363551)  11:15:08
跟WINDOWS还是有区别的.
[北京]Smallrui(24170832)  11:15:24
哪里？
[深圳]飞龙(416363551)  11:16:19
它这样设计就不用处理, 粘包的现象了.
[北京]Smallrui(24170832)  11:16:35
为什么？
[深圳]飞龙(416363551)  11:16:55
你看了它的源码了吗?
[北京]Smallrui(24170832)  11:17:09
没细看
什么问题？
[深圳]飞龙(416363551)  11:17:59
我的意思,它不是按最大吞吐量设计的.
可能是按性能来设计的.
[北京]Smallrui(24170832)  11:18:37
为什么这么说呢？
[深圳]飞龙(416363551)  11:18:39
我也没全看,就看了一下TCP,那块.
[北京]Smallrui(24170832)  11:18:46
我没懂你的意思。
[sz]菜鸟mi(491455335)  11:19:00
你们有没有拿这个库写demo的？
[北京]Smallrui(24170832)  11:19:05
它不是按最大吞吐量设计的.
为什么？
[深圳]飞龙(416363551)  11:19:58
多投才会是最大吞吐量,对吗?
就是先投几个放那等接收.
[北京]Smallrui(24170832)  11:21:24
投什么意思呢？
飞龙。。。。
[深圳]飞龙(416363551)  11:22:03
贴函数吧.
表达不行.
[北京]Smallrui(24170832)  11:22:14
嗯
[深圳]鬼小七(449557841)  11:22:42
飞龙哥说的就是我问你的问题 瑞哥
[北京]Smallrui(24170832)  11:22:53
你们俩要说什么，我不清楚。
[广州]小兀(405278485)  11:23:05
投递IO操作
[深圳]飞龙(416363551)  11:23:14
嗯.
[北京]Smallrui(24170832)  11:23:29
你是说库帮你投的才1个是吧？
[深圳]鬼小七(449557841)  11:23:30
就是libuv采用的是reactor 不是proactor
[深圳]飞龙(416363551)  11:23:47
是的.
只投一个.这样不是最大吞吐量
[广州]小兀(405278485)  11:25:37
投递N个，只有一条队列在排队进行处理
如果是多线程，就可以有N个队列同时处理
[北京]Smallrui(24170832)  11:25:55
我懂了，
这个是要你自己写的
[深圳]飞龙(416363551)  11:27:21
那要改不少东西了.
[广州]小兀(405278485)  11:28:00
我觉得黏包是一种现象，只要现象存在你就得处理
例如我连续SEND 11 22 33，你收到的可能是 112 233这样的
[深圳]飞龙(416363551)  11:28:25
这个库都没为那个设计.
[广州]小兀(405278485)  11:28:54
这个它怎么可能设计得了呀
[深圳]飞龙(416363551)  11:29:17
怎么不行?
外加一个链表就搞定了.
[广州]小兀(405278485)  11:30:05
有些人可能以SIZE来定义一个包，例如10M为一个包，有些人可能以包头包尾结构来定义，你怎么知道呢
包头包尾的结构也是因人而异
[深圳]飞龙(416363551)  11:30:27
与大小无关.
[北京]Smallrui(24170832)  11:30:33

[广州]小兀(405278485)  11:30:32
呵呵，我也不知道，我瞎说的
[北京]Smallrui(24170832)  11:30:42
你没有明白，libuv 做了什么
libuv 的库代码相当轻便
libev 更不用说
完成了他该完成的东西。
他并不是 rpc 通讯库
[北京]Smallrui(24170832)  11:31:47
我写的是架在 libuv/libev/libevent 之上的
[深圳]飞龙(416363551)  11:31:48
小兀 上次我发你的粘包的代码,你看了没有呀.
[北京]Smallrui(24170832)  11:31:58
evb_service.c 分为 3 个版本
[广州]小兀(405278485)  11:32:06
我早忘记了，嘻嘻
[北京]Smallrui(24170832)  11:32:13
evb_service_libuv.c
evb_service_libev.c
evb_service_libevent.c
或者是 evb_service_xxxx_iocp.c
libuv 只能充当你的 rpc 通讯库的冰山一角
但是那恰是他的工作
[深圳]飞龙(416363551)  11:32:46

[广州]小兀(405278485)  11:33:01
有链接吗？发个
[北京]Smallrui(24170832)  11:33:08
飞龙，你可以把 libuv 理解成 select模型
[广州]小兀(405278485)  11:33:08
剩下的交给小瑞
[北京]Smallrui(24170832)  11:33:15
因为他就是 reactor 的
你当成当成 select 来调用
[深圳]飞龙(416363551)  11:33:25

[北京]Smallrui(24170832)  11:33:28
看你剩下的代码还有多少？
懂了吧。
整个 libuv 的封装在你的代码里应该占 500-1000 行代码
再多的话，就是你的问题
[北京]Smallrui(24170832)  11:35:21

包体必须是你的工作量部分
[sz]菜鸟mi(491455335)  11:35:42
 libuv有多少行代码？
[北京]Smallrui(24170832)  11:35:55
5000-10000 左右吧
[bj]show me money(879552855)  11:35:59
libev和libuv有什么区别呢
[北京]Smallrui(24170832)  11:36:10
你的代码应该占 5000-15000 左右
调用他的部分在 1000 左右
他只是一个 selectd
你只是一个 select，好好理解这个意思
[北京]Smallrui(24170832)  11:37:32
刚才贴的是 evbuffer 相当的代码，当然还有 utils 3rdarty common 等其它的常规代码
libev 和 libuv 一直在并行前进
特别是 libev 做了一些系统级的 workaround
[SZ]路人丁(330201538)  11:38:32
女人 现在都不在群里说话了啊
[北京]Smallrui(24170832)  11:38:58

最新版本的 libev 更新到 2013-5
github 是  3 年前的版本了
libev 已经不在 github 维护
你可以这么认为，世界上最恶心的 callback 莫过于 node.js 了
[北京]Smallrui(24170832)  11:40:12
而 node.js 的 callback 恰是源自 libuv
[广州]小兀(405278485)  11:40:16
瑞总授课你想女人，女人授课你老提瑞总，小丁，这可不好，嘻嘻
[北京]Smallrui(24170832)  11:40:22
libev 的代码更加简洁，封装了你要的东西。
你可能工作上用的东西
这些，你自己封装也就是这样
而 libevent 不同
他封装了 buffer event，更多完美
看你需要什么
其实 libuv 封装的东西，他自己都没有用
[北京]Smallrui(24170832)  11:41:22
但是他封装的是为了你的网络编程方便的
像线程池，dllopen，等等
这些是为了你在他的基本上写代码方便
不是他的库不行。
而这些东西之所以自己实现，是不想被库绑着腿。
因为你用了 libuv，想动态切 libev 就比较困难
[北京]Smallrui(24170832)  11:42:47
结束了，就到这里
库和概念和产品不同，库是做基础工作，产品是你要的成型东西
所以一定不要认为  libuv 和 libev 就相当于你的业务
[北京]Smallrui(24170832)  11:43:55
你把 libuv 理解成 select api 就对了
[bj]show me money(879552855)  11:43:56
了解
不是iocp模式吗
[北京]Smallrui(24170832)  11:44:34
iocp 模式往往限制你的代码行为
当然 iocp 是最好的我们容易接受的模式
可是只有 windows 才有
这就是这些库为什么封装的原因
因为 proactor 可以变成 reactor
而 reactor 变不成 proactor
如果是前者的话，那么这些库都会基于 proactor 封装
[北京]Smallrui(24170832)  11:46:14
现代理念讲究一个原则，就是不要写无用的废代码，简约而不简单
[超级]小白兔(164541092)  11:46:13

[北京]Smallrui(24170832)  11:46:43

[上海]菜鸟夏(460173380)  11:48:11
......
[北京]Smallrui(24170832)  11:49:14
最好的锻练就是用最简单容易实现的东西，就以框架的思想去实现
你会熟悉很一个流程需要做什么，为什么这么设计，解决了什么问题
如果你的代码，说不出来，上面几个答案，那就是废代码


 上一篇  下一篇
 ```

 ```
 创建时间：2012年12月13日(星期四) 中午12:21 | 分类：未分类 | 字数：634  | 另存为... | 打印 | 添加到日历
[上海]菜鸟夏(460173380)  12:15:10
有时用，有时偷懒自己用成员变量代替引用计数
auto_ptr、shared_ptr、weak_ptr、scoped_ptr用法小结
http://blog.csdn.net/qingcaichongchong/article/details/7554617
[广州]小兀(405278485)  12:15:49
我昨天看了之后，觉得思路很不错的
你是从什么书里了解到这些的呀
都是STL的？
[上海]菜鸟夏(460173380)  12:16:45
google 来的
[广州]小兀(405278485)  12:17:37
/北京/Smallrui(24170832)  12:18:50
小兀 要理解代码是为人服务的。
不要强求他的代码是怎么用的，
而是要考虑为什么要用他的代码，
如果不清楚为什么要用他的代码，
可以尝试自己与一遍多线程，试试为遇到什么问题，
然后观察他的库到底为你解决了什么。
你的学习方法非常不好 小兀
不要指望着女人，夏老师给你喂代码，
他们脑中的体会是你没有的。
[广州]小兀(405278485)  12:19:40
/北京/Smallrui(24170832)  12:19:51
如果你理解了上面的内容，就会尝试自己实现一个类型的功能，这种境界就升华了
[上海]菜鸟夏(460173380)  12:19:51
[广州]小兀(405278485)  12:19:55
嗯

 上一篇  下一篇
 ```

 ```
 创建时间：2012年11月23日(星期五) 下午5:38 | 分类：未分类 | 字数：9374  | 另存为... | 打印 | 添加到日历
[深圳]飞龙(416363551)  16:33:01
无锁队列

[北京]秋天(576704258)  16:33:15
回来了，继续讨论
[北京]Smallrui(24170832)  16:33:27
linux 的 queue.h 就可以
同步操作的话，怎么也得加锁的，
[深圳]飞龙(416363551)  16:33:43
说说WINDOWS的。
[北京]Smallrui(24170832)  16:34:09
无锁的处理技巧要花时间考虑的
[深圳]飞龙(416363551)  16:34:13
同步操作，多线程操作也不用加锁。
[深圳]鬼小七(449557841)  16:34:42
同步不加锁？
[北京]Smallrui(24170832)  16:34:46
嗯，那你的数据不能删除了
只能加标号
[深圳]飞龙(416363551)  16:35:02
你同步操作要加锁那还叫什么无锁呀。
[北京]Smallrui(24170832)  16:35:13
没加锁啊
[北京]秋天(576704258)  16:35:17
select模型的性能一点都不差于IOCP
因为IOCP为了处理乱序消耗不少的性能
[深圳]飞龙(416363551)  16:35:53
我觉得要差一点。在IO上。
[北京]秋天(576704258)  16:36:16
不会的
[广州]小兀(405278485)  16:36:21
我们以1W的数量级进行讨论，不然没有参照
[北京]秋天(576704258)  16:36:22
select全部用异步模式
[北京]Smallrui(24170832)  16:36:27
测试了才知道
[北京]秋天(576704258)  16:36:41
早就有人测试过了
[北京]Smallrui(24170832)  16:36:49
1w 的级别自己代码一个不写的情况下，也差不了多少
[北京]秋天(576704258)  16:36:53
IOCP只是被神化的东西
[北京]Smallrui(24170832)  16:37:19
对了,select能支持这么多么，我忘了。
[深圳]鬼小七(449557841)  16:37:19
windows平台网游基本都iocp
[北京]秋天(576704258)  16:37:45
谁说的
[广州]小兀(405278485)  16:38:00
多线程就支持
一个线程也支持，只要你不考虑效率
[深圳]飞龙(416363551)  16:38:21
select 用户多了，就要加线程。
[SZ]路人丁(330201538)  16:38:23

[北京]秋天(576704258)  16:38:25
游戏服务器也有一个单台承载上W个连接的
没有
光纠结在效率上了
[深圳]鬼小七(449557841)  16:38:41
没有
[北京]秋天(576704258)  16:38:48
错了
[北京]Smallrui(24170832)  16:38:54
select 是 c 的共用 api。性能不是靠这些来比较的，
就像 windows 要兼容 c 还是会做像 fopen 的接口。
但是核心还是用的 NtCreateFile
[北京]秋天(576704258)  16:38:58
光纠结在线程数量上，忽视了逻辑上的复杂度
[北京]Smallrui(24170832)  16:39:03
或者 ZwCreateFile
说 select 性能不行的都是没有测试
[北京]秋天(576704258)  16:39:29
谁有IOCP解决乱序问题的代码？
[深圳]飞龙(416363551)  16:39:32

[北京]秋天(576704258)  16:39:47
网上都很难找到这个
[深圳]鬼小七(449557841)  16:40:04
公司项目里底层看不到
[北京]秋天(576704258)  16:40:11
能找到的IOCP的代码，都是试验性的，忽略的乱序问题，因为发生概率可能低于0.01%
[SZ]路人丁(330201538)  16:40:12
用到IOCP的 都是服务器级别的项目。。
[北京]秋天(576704258)  16:40:29
其实用select模型的多
[深圳]飞龙(416363551)  16:40:47
Windows-网络与通信程序设计 这本书上有乱序的代码。
[广州]小兀(405278485)  16:40:52
一般的异步是底层收到数据，通知线程申请空间去拷贝，而IOCP是申请好空间让底层进行拷贝，拷贝好了通知线程去处理拷贝
[SZ]路人丁(330201538)  16:40:53
网页数万级连接 是用的什么模式？
[上海]菜鸟夏(460173380)  16:41:01
反编译，反编译。。。
如果有这机会，马上去学反编译
[北京]Smallrui(24170832)  16:41:30
你的代码才是真正影响性能的东西
[上海]菜鸟夏(460173380)  16:41:33
反汇编
[北京]Smallrui(24170832)  16:41:35
系统级的可以忽视
[广州]小兀(405278485)  16:41:54
要了解底层做了哪些工作
[北京]Smallrui(24170832)  16:42:09
你试试同样的功能，拿c实现的 500k，拿c++实现的850k，速度是多少
[北京]秋天(576704258)  16:42:40
说大型网游用IOCP的，能给出证据吗？
我是可以反汇编分析出的
[北京]Smallrui(24170832)  16:43:15
http://www.amazon.cn/gp/product/B009ALJYLG/ref=oh_details_o01_s00_i00

我刚拍完就涨100了
[广州]小兀(405278485)  16:43:13
可能很多都用LINUX，所以不会使用IOCP
[上海]菜鸟夏(460173380)  16:43:14
围观大神们
[SZ]路人丁(330201538)  16:43:17
电驴的代码 有谁有空去研究的？
[深圳]鬼小七(449557841)  16:43:19
我们公司是
[北京]秋天(576704258)  16:43:32
你们乱序问题处理了吗
[深圳]鬼小七(449557841)  16:43:46
天龙八部的好像也是
成熟的框架了
[SZ]路人丁(330201538)  16:44:52
这电脑不错。。厚度很好。。
[北京]秋天(576704258)  16:44:54
你可以下载一个api monitor，监控select函数和GetQueuedCompletionStatus，看到底用的哪个
[广州]小兀(405278485)  16:44:59
我怀疑他们根本没有处理，因为根本不会出现
[北京]秋天(576704258)  16:45:24
select 模型必用select，IOCP必用GetQueuedCompletionStatus
[SZ]路人丁(330201538)  16:46:01
select 不是还有异步select 和 事件select么
[深圳]飞龙(416363551)  16:46:33
那不是一个概念了。
[北京]秋天(576704258)  16:46:50
注意到 其实很多大型网络游戏的服务器 用的就是select 并不是IOCP  一是考虑的是跨平台 二是效率其实没什么区别。可以通过架构来解决select的弱势。
 
[广州]小兀(405278485)  16:46:51
三个模型
[深圳]鬼小七(449557841)  16:46:53


[北京]秋天(576704258)  16:47:00
网上有人有这个说法
[北京]Smallrui(24170832)  16:47:03
秋天说的对
[SZ]路人丁(330201538)  16:47:19
小瑞。。你那电脑只能装64位系统。。
[北京]秋天(576704258)  16:47:24
所谓的大型网游都用IOCP是臆测而已
[北京]Smallrui(24170832)  16:47:27
嗯，我知道
[深圳]鬼小七(449557841)  16:47:28
这个老大跟我说过的
[北京]Smallrui(24170832)  16:47:37
装呗，我已经额外买了一根内存条了
[广州]小兀(405278485)  16:48:05
也有可能，很多人用SELECT实现IOCP的一些机制
[北京]Smallrui(24170832)  16:48:17
我可以明确的说，在windows上面不要玩io的性能，要不就上linux，要么用select足矣满足需求
如果追求性能，所以带锁的实现都不可取的，stl不可取的。
[北京]Smallrui(24170832)  16:49:25
现在服务器都是 dispatch processor 这样子处理的，自己抗几个连接很轻松
[北京]秋天(576704258)  16:49:25
是的
[深圳]鬼小七(449557841)  16:49:38
上次还有一套用服务器代码也是基于iocp的，能看到代码，就是代码太乱，没注释
[北京]Smallrui(24170832)  16:49:46
select满足不了你的需求的确是因为架构问题
[北京]秋天(576704258)  16:49:53
虽然线程少，但是你要投递数据的时候，总要对公共的缓冲区或队列加锁吧？不可能多个线程同时送
[北京]Smallrui(24170832)  16:50:29
研究iocp没什么意义的，不如看看epoll
[北京]秋天(576704258)  16:50:53
linux下的吧？
[北京]Smallrui(24170832)  16:50:57
如果是惯用windows开发，没办法只能往这方面越长。
嗯，是的
[深圳]鬼小七(449557841)  16:51:02
不研究，看linux的东东，
[北京]Smallrui(24170832)  16:51:07
unix是kqueue
[北京]秋天(576704258)  16:51:53
是的epoll这东西非常好
[北京]Smallrui(24170832)  16:52:46
windows的socket一开始是从unix移植过来的。每个进程如果要支持网络，还要事实 socket_init 一下，建立一个管道和网卡互通，这本身就是进程间通讯
[北京]Smallrui(24170832)  16:53:56
爬表是很慢的，这对 select 是一个诟病，但是，如果连接断开没有这么多频繁的短连接，一切都免谈，
而且多线程处理本身的效率就高
[深圳]鬼小七(449557841)  16:56:18
如果单线程，select是不是只能支持1024个连接呢
[北京]Smallrui(24170832)  16:57:27
用select或者iocp其实要看服务器的构架。
这个服务器是用来处理数据的还是用来接受消息的。
如果是处理数据的，多少个连接其实不是性能损失大问题，因为他本身就有自己的瓶颈。
如果是单一个请求和dispatch的，这个时候用iocp在前端会好一点，但是服务器的性能更多的损失不是在io，而是在自己的逻辑处理代码性能中。系统为你损失的很微妙，即使是重复1w个次数，而实际运用是不可能有这情况的。
[北京]Smallrui(24170832)  16:58:55
select 是 c 的标准，每个平台都会去实现的，性能其实是系统实现的问题，但是跨平台，考虑真正性能的话，可以用一些封装，像 ASIO，libevent，ACE 等等这些。
[北京]乱世佳猿(258032081)  16:59:24

为什么输出的是aaa而不是地址值呢？
[北京]Smallrui(24170832)  17:00:25
像浩方这种游戏，一个服务器就服务最多300-500人吧，了不得了，服务器的带宽也摆在那了。
传奇私服好像只服务500人是上限，默认是300
[深圳]鬼小七(449557841)  17:01:10
听同事说一个服撑多8000人，双线，目前最好的配置
[北京]Smallrui(24170832)  17:01:36
延迟多少呢？
前端是用iocp是好的，其它的监听模块就无所谓了
看你做的是哪部分，刚才说了
[深圳]鬼小七(449557841)  17:02:57
这个很卡了，现在一般就单服2000吧，很多页游差不多就这样子
[北京]Smallrui(24170832)  17:03:08
如果你的游戏性质是8000人同时互动，没办法只能做最好的机器，如果是浩方这种互动人数只有10个人，p3的机器就可以了
一般都是分布式部署的，不是拼的单个机器的性能
[北京]Smallrui(24170832)  17:04:14
客户端连接->服务器1
                  服务器2

服务器1 返回当前 500 人上限，跳转至子服务器 1.2 处理。
这样子做就可以了。
前端服务器一般不会太多，腾讯好像就20几个吧，全国
[深圳]鬼小七(449557841)  17:04:34
恩，都是组，集群这样
[北京]Smallrui(24170832)  17:04:46
4000-4004 8000-8012 好像，腾讯的
对吖，所以iocp在这之中发挥的优势不大
当然完美主义者是用iocp的，代码控制好为前提
[北京]Smallrui(24170832)  17:05:54
你要保证后端的数据库信息或者序列化信息是统一的才行
要memcached或者别的东东。这些一定要部署的开
[上海]菜鸟夏(460173380)  17:06:43
今天涨姿势
[北京]Smallrui(24170832)  17:08:01
客户端登陆 ->固定几个服务器->服务器接受跳转至最闲服务器
《保证服务器的所以处理和数据是分开的》，
数据处理好以后放至单独的服务器（可以理解成序列化好的类中）
然后由前端的发送任务端取，并发送。
好的服务器考虑的并不是哪一个性能多高，而是智能切换的速度，fail-over的机制，压力机制，同步性
[深圳]鬼小七(449557841)  17:08:36
恩，是这样
[北京]Smallrui(24170832)  17:08:43
如果做好这几块的话，pc不行，加10000个子服务器
[上海]你的女人<tinysrc@163.com>  17:09:23
做服务器不可能不考虑效率的。
[北京]Smallrui(24170832)  17:09:40
好了，具体以需求为准。
[深圳]鬼小七(449557841)  17:09:47
女人哥也讲讲
[北京]Smallrui(24170832)  17:09:57
女人是完美主义控，考虑性能是必须的。考虑集连是现在的趋势。
[上海]你的女人<tinysrc@163.com>  17:10:47
效率不光是代码执行效率
[北京]Smallrui(24170832)  17:10:50
构架考虑的是需求和框架的塔建，单纯讨论iocp和event是没有意义的。
[sz]rejoe(491455335)  17:11:01
女人把服务器代码发一个上来吧

[深圳]鬼小七(449557841)  17:11:08
效率是必须哦，我们已经优化很久了
[北京]Smallrui(24170832)  17:11:26
一看你们的代码，就知道代码写的不怎么样
[上海]你的女人<tinysrc@163.com>  17:11:43
分布式架构考虑的多了去了。
[广州]小兀(405278485)  17:11:49
迷糊，我刚才玩CF，老是有BUG，哎，玩得我都想去腾讯帮你们搞搞了
[北京]Smallrui(24170832)  17:11:52

这代码完美是测试水平
不清楚，start 要做成虚函数有什么意义？
[广州]小兀(405278485)  17:13:17
这代码一看就是网上拷贝的，我都见过了

[上海]你的女人<tinysrc@163.com>  17:13:33
很多代码都很烂。
[北京]Smallrui(24170832)  17:13:34
还有，把这个类导出去了，也是一个错误，如果是面向对象的代码，调到别的 dll 以后，性能马上下一个档次
[深圳]鬼小七(449557841)  17:13:36
 肯定有它的用处吧
[北京]Smallrui(24170832)  17:13:46
很明显这类就不能导出，导出的只有接口。
他这是不懂包装，乱导出接口
[北京]乱世佳猿(258032081)  17:14:56

[广州]小兀(405278485)  17:15:42
便于更新通信库
不想给其他新人代码的行为
[深圳]鬼小七(449557841)  17:16:13
老实说，底层的东西我不知道，上层的代码的确乱，因为很多新代码，旧代码又没删除
[上海]菜鸟夏(460173380)  17:16:18
大神在布道
[深圳]鬼小七(449557841)  17:16:26
小兀是说得对的
[北京]Smallrui(24170832)  17:16:54
小七你们公司一看就不是大公司，研究它的代码没什么意义
你不如研究一下原理
多线程的处理场合，服务器要注意哪些细节。
[深圳]鬼小七(449557841)  17:18:52
恩，没研究他的代码。只是在想是怎么实现的。
[sz]rejoe(491455335)  17:19:08
哪个公司都有垃圾代码。
[北京]Smallrui(24170832)  17:19:29
class xxxAPI CNetIOCP
{
   virtual xxxx() = 0;
   virtual xxxx() = 0;
};
纯虚类生成对象可以理解，如果是继承完以后再扩展，这明显不是服务器的类干的事，很明确是一些子请求的包装。
[sz]rejoe(491455335)  17:19:30
基本的逻辑很多都毕业生或者是三流程序员写的
[上海]菜鸟夏(460173380)  17:20:27
这是在说我么？
貌似我是这么干的
[北京]Smallrui(24170832)  17:20:49
毕业个几年就知道程序该怎么写了
[上海]菜鸟夏(460173380)  17:21:08
然后很多virtual被我换成std::bind
[北京]Smallrui(24170832)  17:21:11
有很多代码包装的华为无实
[上海]菜鸟夏(460173380)  17:21:54
问题就在于没人去告诉你，这代码华而不实
[深圳]鬼小七(449557841)  17:22:01

所以说环境很重要
[上海]菜鸟夏(460173380)  17:22:54
青蛙一眼可以望天，谁知自己代码渣的一沓糊涂
好环境？我还求收留呢？
[北京]Smallrui(24170832)  17:24:06
如果不明白就自己动手写，写了你就知道要注意什么了，哪些不对了。一开始看别人华而无实的东西是浪费时间。不如懂原理，自己尝试。
[深圳]鬼小七(449557841)  17:24:26
其实服务器的代码我感觉写得越简单越好，封装来封装去，有点过于设计的感觉，别人也不容易看懂
[北京]Smallrui(24170832)  17:24:57
他没封装出来任何意义，只在把简单复杂化，并不是用来解决问题的
有很多开源的服务器rpc模型，可以看
[北京]Smallrui(24170832)  17:26:01
他们是建立在解决问题之上的，
[深圳]鬼小七(449557841)  17:26:10
上次看以前的代码，用了一个命令模式，看了好久
[北京]Smallrui(24170832)  17:27:00
小七你们有服务器是用来做棋盘游戏还是8000人同时互动的？
[深圳]鬼小七(449557841)  17:28:46
arpg类型，我们具体多少人还不知道呢, 8000人是一个同事说的，他之前公司做的游戏上线了
[广州]小兀(405278485)  17:29:37
一个房间多少人？
[北京]Smallrui(24170832)  17:30:16
现在全球都在炒云计算，看来你一点没听进去。
[广州]小兀(405278485)  17:30:37
？
[深圳]鬼小七(449557841)  17:30:42
是场景，房间是棋牌的概念
[北京]Smallrui(24170832)  17:30:59
你的代码的强度不应该考虑是一个cpu多么强的基础上，而是是不是支持多个pc机同时为你服务器，即便是单一个pc机也是考虑的范畴。
[深圳]鬼小七(449557841)  17:31:01
现在都讲分布式，集群
[广州]小兀(405278485)  17:32:06
我只是想知道，同一个场景支持多少个用户信息的同步
[北京]Smallrui(24170832)  17:32:32
抛掉任何的框架或者代码，自己动手吧。多看书，懂原理。然后叫他给你讲一课，他为什么这么设计，是为了什么，如果只为了华，那就没什么说的了
代码其实只是实现，关键是解决了什么问题。
对的，小七连小五问的需求都没明白，就看别人的代码。这就是学习的方法没掌握好
[深圳]鬼小七(449557841)  17:33:30
我知道啊
老实说，没人讲设计的东西，项目太赶了
[sz]rejoe(491455335)  17:34:23
那就先开始搞吧，
搞出来遇到问题再改。
[广州]小兀(405278485)  17:34:34
哎，就从来没有人给我讲过
[深圳]鬼小七(449557841)  17:34:39
我们服限定是一个场景是1000人，同步要看你说的什么信息
[sz]rejoe(491455335)  17:36:09
没有人讲就要研究。
前人种树，后人乘凉。
[深圳]鬼小七(449557841)  17:36:38
恩
[广州]小兀(405278485)  17:36:43
例如玩CS，一个图可以供多少个参与者，同时又支持多少个观看者
[北京]Smallrui(24170832)  17:36:47
先把类做成一个直观图，讲关系，再深入的看代码。
```

```
创建时间：2012年11月5日(星期一) 中午1:47 | 分类：未分类 | 字数：8578  | 另存为... | 打印 | 添加到日历
[shenzhen]rejoe(491455335)  12:38:43
这些平板屏蔽都很小，都只是辅助作用而已。
屏幕
[北京]Smallrui(24170832)  12:38:49
在哪办公他们都会有键盘的呀，
[北京]秋天(576704258)  12:39:13
那可不一定
等我出差回来就搞定这款
[北京]Smallrui(24170832)  12:39:25
surface 键盘是摆设，lenovo 的键盘是电脑一部分
[北京]秋天(576704258)  12:39:32
不让买还行，我挣钱
[北京]Smallrui(24170832)  12:39:40
哈哈，
[北京]秋天(576704258)  12:39:56
surface pro太贵了，rt不行，不兼容 win7软件
如果surface pro也卖7000，我毫不犹豫拿下，但是看来不太可能
[北京]Smallrui(24170832)  12:40:25
这就是它的没设计好，我觉得硬盘都应该在屏幕端，键盘可以取下来
[北京]秋天(576704258)  12:40:50
它是超级本，不是平板
[北京]Smallrui(24170832)  12:40:55
键盘包括主板连着电脑，不科学。想轻轻不了，想重，自然他不如note
[北京]秋天(576704258)  12:40:57
属于超级本附带平板功能
[韶关]小兀(405278485)  12:41:05
开发出一款插拔式硬盘（访问速度要与SATA接口的差不多），一个是工作硬盘、一个是游戏硬盘，工作的时候切换至工作硬盘，玩的时候切换至游戏硬盘，这样就可以工作游玩两不误了
[北京]秋天(576704258)  12:41:19
而且128G的固态硬盘，已经算很大的了
[北京]Smallrui(24170832)  12:41:22
嗯，所以我说，现在的电脑还没有达到完美平衡
[北京]秋天(576704258)  12:41:43
技术上可以达到，只是价钱太高
完美平衡，卖2W，估计就没人买了
[北京]Smallrui(24170832)  12:42:07
最好的电脑是 屏幕（包括主机）+键盘，键盘可以做屏保护壳。也可以随时取下来。
我要是厂商都这么干
厂商那帮老人不知道在想什么
[北京]秋天(576704258)  12:42:37
他们要考虑成本的，要让大多数人可以承受价格
[北京]Smallrui(24170832)  12:42:44
嗯，这个明白。
[北京]秋天(576704258)  12:43:18
一个大的制约因素是电池没有突破
必须降低功耗
这么多年了，电池还是那样
[北京]Smallrui(24170832)  12:43:39
键盘 1cm 就可以搞定。然后可以做屏幕的保护，挂在上面，最好可是分离，不是粘合一起，有额外支架
[北京]秋天(576704258)  12:43:42
没有革命性的电池产品出现
[北京]Smallrui(24170832)  12:43:47
因为有些人，还是习惯把屏放的很高，或者很远
[北京]秋天(576704258)  12:43:53
surface不就是吗
[北京]Smallrui(24170832)  12:44:08
但是你不是说 surface 的系统受限制？
[北京]秋天(576704258)  12:44:29
surface RT受限制，surface Pro不限制
[北京]Smallrui(24170832)  12:44:42
果然好东西都是坑爹的价
[北京]秋天(576704258)  12:44:43
surface RT 4000多，surface Pro应该在8000以上
surface Pro是x86架构，和笔记本没啥区别了，你说的可能就是这个吧
[北京]Smallrui(24170832)  12:45:16
嗯，是这个
[上海]菜鸟夏(460173380)  12:45:16
联想yoga 原来是这个
[北京]秋天(576704258)  12:45:37
太贵啊
[北京]Smallrui(24170832)  12:45:58
去美国代购
[北京]秋天(576704258)  12:46:15
要3个月以后出，现在出的是ARM架构的，好多网友买了之后打客服投诉说不能运行win7的程序，真服了这些电脑盲
[北京]Smallrui(24170832)  12:46:20
国产的零件也太坑爹
[北京]秋天(576704258)  12:46:35
要是RT能运行win7的，早卖疯了
[北京]Smallrui(24170832)  12:46:39
买 arm 架构的现在机遇还不成熟
arm 毕竟软件不及 x86
[上海]菜鸟夏(460173380)  12:46:48
[北京]秋天(576704258)  12:46:16
要3个月以后出，现在出的是ARM架构的，好多网友买了之后打客服投诉说不能运行win7的程序，真服了这些电脑盲

说不定还真有
[北京]秋天(576704258)  12:47:18
买之前都不了这是ARM架构的，他们可能不懂，以为可以运行
[北京]Smallrui(24170832)  12:47:23
其实，现在做一款虚拟 机，让 arm 架构的去翻译 x86 指令，或者互翻译，肯定会火。
[北京]秋天(576704258)  12:47:23
了解
[北京]Smallrui(24170832)  12:47:29
但是。。专利有个大问题
[北京]秋天(576704258)  12:47:36
嗯，是啊
但是很难完美翻译
因为底层驱动没法翻译
[北京]Smallrui(24170832)  12:48:09
指令这东西，应该快融合了，如果企业间达到协议
做套标准，
不需要啊，直接调当前现有系统的驱动
他在代码里肯定只是调用了驱动的 api
[北京]Smallrui(24170832)  12:49:18
就像虚拟机一样
虚拟机不是一样可以运行 arm 的东西吗，在 x86
只是性能不如原生的那么强
[北京]秋天(576704258)  12:49:48
嗯
[北京]Smallrui(24170832)  12:50:21
现在微软放出来 arm 的操作系统了吗
[SZ]路人丁(330201538)  12:51:38
一对情侣一起去买了一块饼，女生吃了3/7块饼，男生吃掉剩下的4/7块饼。男生比女生多出了4.5元，请问这块饼多少元?
[北京]Smallrui(24170832)  12:52:03
安卓都放出来 x86 的了，只是驱动很有问题，微软再不搞 arm 要自己死
[韶关]小兀(405278485)  12:52:05
其实如果你不经常刷机，我觉得兼容性这些问题可以不用考虑那么深入
[北京]秋天(576704258)  12:52:13
我在想为什么安卓平板那么便宜，500块钱就能买到
[北京]Smallrui(24170832)  12:52:34
安卓的硬件厂商方案多啊，
[SZ]路人丁(330201538)  12:52:39
成本不高。质量不行。产品量化
[北京]Smallrui(24170832)  12:52:46
都是集成的芯片，主板也没这么强大
像 TI、高通、MTK 啥的，
[shenzhen]rejoe(491455335)  12:53:11
使用的器件不同价格差异也会很大。
[北京]Smallrui(24170832)  12:53:13
一体化的一块主板，什么内存啥的都有，、
[北京]秋天(576704258)  12:53:23
哦，原来如此
连 cpu是不是都一体化了？
[北京]Smallrui(24170832)  12:53:41
他没有pc机构架这么强
嗯
像小米啥的，整一块板子就是高通的某某芯片
[SZ]路人丁(330201538)  12:54:04
平板电脑 又不需要什么运行大型游戏
[北京]Smallrui(24170832)  12:54:15
cpu 是刻在板子里的，
[SZ]路人丁(330201538)  12:54:19
配置低级吧
[北京]Smallrui(24170832)  12:54:28
cpu 也不需要考虑这到多外界条件，代码都是自己整一个写下来的。
所以便宜。
配置一方面，框架小也是小方便，都是微内核的。
[北京]Smallrui(24170832)  12:56:07
TI、高通、SONY、海思、MTK、展讯、等等等
SONY 已经挂了
国内山寨版子都是用的 mtk 的。（android）。MTK 就是原来的中国最大山寨机的要板制造商
[北京]Smallrui(24170832)  12:57:07
还是飞思卡尔
都是山寨机厂商
国内的平板 90% 的是飞思卡尔和小部分 MTK 的。这质量和 TI 高通的，根本没有办法比。
[北京]Smallrui(24170832)  12:58:47
据说深圳小厂子组装一块飞思卡尔的机器，只赚15块钱利润。
[北京]Smallrui(24170832)  13:00:25
拿到飞思卡尔或者 (CMOS等等）的解决方案。。然后根据你的屏（SHARP 索尼，等等山寨屏厂商）写上硬件驱动代码。（这部分的接口是这些主板留出来的。就像 VGA 接口这样）。然后在挂上壳，配上电池。一块山寨机就出来了。
包括 moto 等等这些厂商都是这样的，在 android 的下面驱动层，默认只内置了，TI 、高通一些主流的硬件商的实现，所有的音频、视频、等接口是虚拟的。这些山寨厂商根据需要一一实现，系统就跑起来了
[北京]Smallrui(24170832)  13:04:51
海思（华为的子芯片公司）、CMOS、飞思卡尔、、MTK、展讯、PHLIPS、SHARP、LG、sony、三星、高通、德州仪器，等等都有自己的芯片组装。一般国产都是采用的（飞思卡尔，CMOS、MTK、展讯）这些便宜的厂商。而大厂商一般都是用的硬件成本高的厂商的方案。
显卡屏也是一个重大缺口的地方，像 SHARP 的屏，LG 的屏，三星的屏，等等屏，价格会差很远。
[北京]Smallrui(24170832)  13:06:19
另外就是型号的问题，09 年的和 10 年的肯定会差很远。还有就是本身的架构，山寨机一般都是使用的次年淘汰品，或者厂商压货（倾销货）组装，所以成本自来便宜。
[北京]Smallrui(24170832)  13:07:31
打了那么多，没人鼓掌么，
[成都]漫步雨(475885087)  13:07:46

我不相信你手打的
[shenzhen]rejoe(491455335)  13:07:56
不明觉厉。
[成都]漫步雨(475885087)  13:08:15
多半是问度娘要的
[北京]Smallrui(24170832)  13:08:29
手指头好了
[北京]Smallrui(24170832)  13:10:30
像一些厂商或者经销商压的库存，很可能3-4年前了，卖不出去，就会被山寨厂商以低价格买断掉，然后xxoo可以让他跑起来，稳定性啥的不解释了。这也是价格差的一种。
[上海]菜鸟夏(460173380)  13:11:46

[北京]Smallrui(24170832)  13:12:22
也就是说，很可能一些山寨机的成本价会高于销售价格的，一些是贱卖，厂商赔钱舍入，还有一些就是山寨机厂商的功力，可以组装的这么完美。低价格买入性能高的东西，然后组装成低的价格仍然有赢利的价格差。
但是做山寨机的厂商多了，90%的都是赔钱的。
[北京]Smallrui(24170832)  13:13:27
不是所有的人都可以像小米这么忽悠成功的。
[上海]菜鸟夏(460173380)  13:13:38
赔钱还干？
[北京]Smallrui(24170832)  13:13:58
不干没办法，零件压着怎么办？
舍钱也要干
不干赔的更多
[上海]菜鸟夏(460173380)  13:14:17
无效循环，等寒冬过去。。
[上海]菜鸟夏(460173380)  13:15:48

有些企业无限在那里循环，到最后破产的时候，外债那个多啊。。。
[北京]Smallrui(24170832)  13:17:42
不要买山寨机也有一些必要性，举个专业术语来说，在视频压缩算法 h264 中有一个就 loopfilter 的东西，就是环路滤波，就是在做压缩宏块边缘处理的东西，可以这么理解，而一些山寨机的厂商硬件实在太垃圾了，根本跑不起来这个。怎么办呢，好吧，阉割，这部分功能不实现了。虽然可以放出来视频，但是效果、方格。完全不是一个体现的。 这也是企业的埋的空子。
[韶关]小兀(405278485)  13:17:51
都是想先占领市场
[上海]菜鸟夏(460173380)  13:18:31
不好好做产品，先去抢市场
[北京]Smallrui(24170832)  13:19:36
就连三星某xxoo的平板都不支持，虽然他们是大厂商，他们组装完以后才发现，擦，这成本和这硬件，一些功能是做不了的怎么办呢，老百姓不懂，阉割了吧，下一期的产品再说。（因为他们是不同的部门，这个部门真没想到，设计成这样的，那个部分搞不定。）
[韶关]小兀(405278485)  13:19:53
占领了市场，就不是单单是靠卖硬件赚钱了
[上海]菜鸟夏(460173380)  13:21:16
除非是新兴市场吧
[北京]Smallrui(24170832)  13:21:54
硬件成本是活生生的省钱的地方。每个厂商都会试图压到最低化，就连小米，50块钱的耳机都省下来了。为了吹嘘自己用的高通某高cpu的芯片，不得不让屏幕或者其它方面变的鸡肋下来，毕竟，硬件成本是最直接关乎赢利额的地方
[成都]漫步雨(475885087)  13:22:05

[上海]菜鸟夏(460173380)  13:22:36
还是血汗工厂的老路子
[韶关]小兀(405278485)  13:22:48
硬件产品就算在怎么节省，也是会有瓶颈的一天
[北京]Smallrui(24170832)  13:23:07
一句话，企业都是黑心煤。
[成都]漫步雨(475885087)  13:23:11
硬件天天换代
所以大家就不要追了
[北京]Smallrui(24170832)  13:23:39
雷军这人很阴险，
[上海]菜鸟夏(460173380)  13:24:18
雷不群
出名的
[成都]漫步雨(475885087)  13:24:42
只要能挣钱就好
他才不管这些呢
[北京]Smallrui(24170832)  13:25:07
次期发售会有好几点好处，第一，厂商的批货的采购量会有一个控制，并且可以选最优的价格和采购量。第二，大家都知道，硬件这东西，更新换代快，再新的东西过了时间也会便宜。第三，内置的应用和第三方企业谈合作的时候，会有一个活生生的数据告诉它，就是这么多用户群。
当然，还有很多。很多。
[成都]漫步雨(475885087)  13:25:38

开会了，你还在扯蛋
18d搞晕你
[韶关]小兀(405278485)  13:25:59
小米的销售策略其实真的非常优秀
[北京]Smallrui(24170832)  13:26:08
雷军真心是一个人物，
开创了中国的先河了
[韶关]小兀(405278485)  13:26:29
但是这销售策略未必就是他想到的
只能说他的团队牛逼啊
[北京]Smallrui(24170832)  13:26:56
但是，雷军是中国第一个发明在手机销售业雇佣水军的人物
[上海]菜鸟夏(460173380)  13:27:35
补图

[成都]漫步雨(475885087)  13:27:49

我是果粉
不是米粉
[韶关]小兀(405278485)  13:28:01
哥也要赚钱啊
我是钱奴
[成都]漫步雨(475885087)  13:29:59
你是钱奴，简称撸哥

[韶关]小兀(405278485)  13:30:13

[成都]漫步雨(475885087)  13:32:20
晚上吃什么好呢

[韶关]小兀(405278485)  13:33:10
你们一个人一般都做什么吃
[成都]漫步雨(475885087)  13:33:25
一个人一般不吃
没胃口
[韶关]小兀(405278485)  13:33:35
我也是的呀
我还以为我不正常呢
[成都]漫步雨(475885087)  13:34:09
你当然不正常，我就没一个人吃过饭

[SZ]路人丁(330201538)  13:34:38

一对情侣一起去买了一块饼，女生吃了3/7块饼，男生吃掉剩下的4/7块饼。男生比女生多出了4.5元，请问这块饼多少元?
[韶关]小兀(405278485)  13:34:45
4.5
元
[SZ]路人丁(330201538)  13:35:09

[成都]漫步雨(475885087)  13:35:24
当然是男生请客
[福州]123(526588558)  13:35:25
4.5
元
[成都]漫步雨(475885087)  13:35:28
女人又不给钱
超级小白兔(164541092)  13:35:34

你们的思维可真。。。
[SZ]路人丁(330201538)  13:35:49

[成都]漫步雨(475885087)  13:36:22
放心了，后面有一男的

[韶关]小兀(405278485)  13:36:37
不是后面，而是拿相机的那位
[成都]漫步雨(475885087)  13:36:42
这绿帽子带得不错
[韶关]小兀(405278485)  13:37:15
应该说着帽子戴的有点绿
[成都]漫步雨(475885087)  13:37:43
不过这女的也太。。。
[SZ]路人丁(330201538)  13:37:51

[福州]123(526588558)  13:38:09

[深圳]临沂(540078111)  13:38:10
是那个男的给他老婆拍的招聘啊
超级小白兔(164541092)  13:38:10
能给小孩子洗澡用了。
[福州]123(526588558)  13:38:22
真恐怖
[成都]漫步雨(475885087)  13:38:59
考老子一天都吃不完
[SZ]路人丁(330201538)  13:39:00

[成都]漫步雨(475885087)  13:39:24
尼玛浪费粮食
[SZ]路人丁(330201538)  13:41:38
Σ
[北京]Smallrui(24170832)  13:41:47
一对情侣一起去买了一块饼，女生吃了3/7块饼，男生吃掉剩下的4/7块饼。男生比女生多出了4.5元，请问这块饼多少元?


13：36 开更
解题思路：
可以理解为，一共49块小饼，7份。

女生吃了 3 * 7 = 21，
男生吃了 4* 7 = 28.

以女生的钱为单位，列公式。

28    (x+ 4.5)
-- =  --------
21    (x)

28x = 21x + 21 * 4.5

7x = 94.5

x  = 13.5


女生吃了 13.5。占了屏的 3/7

那么饼是 13.5 / (3/7)  = 13.5 * 7 / 3 =
饼价。
31.5

 

对么。
没验算
[成都]漫步雨(475885087)  13:42:15

[SZ]路人丁(330201538)  13:42:15
坑爹的孩子。。
[成都]漫步雨(475885087)  13:42:30
小丁快说对不
瑞总是数据天才
高尔基
[北京]Smallrui(24170832)  13:42:51
等等还没玩
[SZ]路人丁(330201538)  13:42:49
31.5的都是找不到姑娘的。。
[北京]Smallrui(24170832)  13:43:26
绕晕了，答题累，算了反正不扣分。
[SZ]路人丁(330201538)  13:44:18
√
[深圳]临沂(540078111)  13:46:09
啥饼啊  匹萨饼啊
[北京]Smallrui(24170832)  13:46:18
答案是多少
[SZ]路人丁(330201538)  13:46:26
兰州烧饼
4.5
[北京]Smallrui(24170832)  13:47:21
4.5 x 7 就行了，我真是笨蛋。。。。


 上一篇  下一篇
 ```

 ```
 点击图标 标记为星标记事Smallrui 23:50:18 预计招5个人，一个框架
创建时间：2012年7月5日(星期四) 晚上11:56 | 分类：未分类 | 字数：269  | 另存为... | 打印 | 添加到日历
Smallrui 23:50:18
预计招5个人，一个框架，1个服务器，两个专业领域熟悉的通讯（pc mobile），一个 java 端，一个 pc 端兼界面，开发周期4个月上线demo，7个月-10个月发第一版。

这人力分配已经省的不能再省的，还要每个人都能干活按时完成任务，多少资金，你算算看吧，这是我估的价
网视通-罗兄 23:51:46
嗯。
Smallrui 23:51:50
呵呵
网视通-罗兄 23:51:53
我问问他们先。
网视通-罗兄 23:51:59
原来有人报过价了。
Smallrui 23:52:07
嗯，
```

```
创建时间：2012年7月5日(星期四) 晚上11:46 | 分类：未分类 | 字数：1945  | 另存为... | 打印 | 添加到日历
网视通-罗兄 23:16:45
收到你的文件了。密码多少呢
Smallrui 23:17:10
兄弟我那500块钱什么时候给我额
Smallrui 23:17:13
密码 live
网视通-罗兄 23:17:32
这几天忙完就整给你。一定会给你。
Smallrui 23:17:36
嗯
网视通-罗兄 23:18:47
我才出差回来。
网视通-罗兄 23:18:59
刚到家
Smallrui 23:19:00
这么忙啊
Smallrui 23:19:04
注意身体
网视通-罗兄 23:19:26
为了生活不容易，我是一家子人在广州。
Smallrui 23:19:51
我也算一家子了，唉，都不容易
Smallrui 23:20:15
早点休息，
网视通-罗兄 23:21:09
liblivepolyii_jni.so
网视通-罗兄 23:21:13
这个没有文件
Smallrui 23:21:20
自己编译一下就出来了
Smallrui 23:21:23
没往包里打
网视通-罗兄 23:21:36
嗯。
网视通-罗兄 23:25:31
我同你说的事，你参考一下
网视通-罗兄 23:25:32
关于“互动音视频”解决方案需求

需求说明：
我司主要从事增值类业运营，现增值业务在往移动互联网发展。我司在基于移动网上有家居视频监控、企业监控、数字校园等应用。为跟进市场需求靠近移动物联网，期望找一家有技术实力的公司。大家一起合作，将互动音视频应用在增值运营业务中。由我司负责产品推广运营，产生收益可分成或谈其它合作模式。

应用场景：
1、升级我司的数字校园平台，在手机客户端中增加：远程家访，在线教学。现有客户20万。
2、升级我司的神眼企业平台，在监控客户端中增加，企业在线招聘栏目。现有客户10万。


远程音视频面试系统,企业不用现场招聘，通过远程视频面试系统，就可了解求职人员各种能力。可多能参与面试，多人使用互动。支持用户使用PC/手机等接入。

远程音视频家访，教学系统。结合沿海城市各方面需求，将家长到学校、老师家访工作，简化成音视频面对面的探视交通工作。

合作厂商提供：
提供基于PC+CAMER、安卓、IOS、WINPHONE 四大平台音视频传输编解码SDK模块，可集成应用开发。

提供服务器端转发服务模块SDK或成品授权。（含与客户端集成的协议）

或参考网站上的介绍：
http://baike.baidu.com/view/5507188.htm#1


网视通-罗兄 23:25:38
10－15万
网视通-罗兄 23:26:46
做完提供全部代码工程文件
网视通-罗兄 23:27:11
原来打算找视频会议厂家买授权lices来做。
Smallrui 23:27:39
最准备的需求有么
Smallrui 23:27:42
准确的
Smallrui 23:27:57
呵呵 为什么后来取消了
网视通-罗兄 23:28:29
需求就是上面的。
网视通-罗兄 23:28:40
因为还没有客户，等慢慢来做。
网视通-罗兄 23:28:49
http://baike.baidu.com/view/5507188.htm#1
网视通-罗兄 23:28:57
你看看这个。
Smallrui 23:31:58
实时录像这个qq好像做的也不是很好。
Smallrui 23:32:14
同步没有做好，现在做的是语音一条条发的，
网视通-罗兄 23:32:15
嗯。
Smallrui 23:32:25
anychat 现在还没有移植过来吧，吹的挺好的。
网视通-罗兄 23:32:39
QQ应该不会做，如果做了人家用来做裸聊，对他们的影响大。
Smallrui 23:32:51
qq 是技术有限吧，
网视通-罗兄 23:32:58
他们做好了
网视通-罗兄 23:33:04
QQ有，不敢做。
Smallrui 23:34:08
做这个风险挺大的
Smallrui 23:34:12

Smallrui 23:35:12
首付保障金有没有
网视通-罗兄 23:35:43
关键要有可靠的协议和demo才能去弄。
Smallrui 23:36:00
我可以做吧，但是做了对我一点好处没有，如果你们不采纳，
Smallrui 23:36:14
花了半年，真不如我打工半年舒坦了
Smallrui 23:36:58
pc端对手机端是吗
网视通-罗兄 23:37:09
pc端对手机端。
网视通-罗兄 23:37:13
或者手机对手机端。
Smallrui 23:37:24
这有就4块需要做了至少
Smallrui 23:37:31
15w太低，一大块才4w。

```

```
点击图标 标记为星标记事那一年最大的目标是做一名软件工程师 又一
创建时间：2012年6月27日(星期三) 下午2:10 | 分类：未分类 | 字数：124  | 另存为... | 打印 | 添加到日历
那一年最大的目标是做一名软件工程师
又一年最大的目标是创一家自己的公司
又一年最大的目标是找个翻倍的薪水
又一年最大的目标是找一个喜欢的妹纸
又一年最大的目标是找个翻倍的薪水
这一年最大的目标是找珍惜现在的妹纸
这一年最大的目标是创一家自己的公司
```

```
创建时间：2012年2月1日(星期三) 晚上11:30 | 分类：未分类 | 天气：北京晴 | 字数：1380  | 另存为... | 打印 | 添加到日历
Smallrui  23:23:25
我发现现在的枣庄出租车调度是一个问题，到处找不到车，一些车在乱。针对这个问题，我打算自己开发一套云调度，能让出租车实时的显示在控制台上，然后打的的
Smallrui  23:23:35
只需要给服务中心打一个电话，他们会找最近的车过来
小小大人物  23:23:57
有够酷
Smallrui  23:24:09
甚至可以在出租车上他们自己也知道同事的车跑哪去了，不要重复的溜或者是出人少的地方
Smallrui  23:24:33
这也是从那个 极限救援 电影里面想到的
小小大人物  23:24:40
不过，还是得说你们枣庄开出租车的人真笨！连哪儿生意好都不知道
Smallrui  23:24:55
是想打车的人也打不到车。
Smallrui  23:25:00
只能靠熟人，然后叫电话
Smallrui  23:25:08
他们再给朋友 打电话 问问谁方便
小小大人物  23:25:14
所以说他们笨啊
小小大人物  23:25:34
就这还开出租车
Smallrui  23:25:46
可是这个服务中心调度的话，就出现了腐败问题，比如 说他们故意只叫那几个人的车，这是个漏洞
Smallrui  23:26:05
所以，智能的就判断，必须联系到车主也是一个重心
Smallrui  23:26:27
这只是这两天的想法，我打算出一个商业计划书，然后写出来一个文档，再去开发落实这个事情 
Smallrui  23:26:55
给服务中心一个号码，自动转接到，距离你最近一个出租车。
小小大人物  23:26:57
是不是还要和你们的市长谈啊？
Smallrui  23:27:01
然后能联系到车主。
小小大人物  23:27:09
不错，不错
Smallrui  23:27:15
给市长开车的司机我家认识 
小小大人物  23:27:15
北京有没？
Smallrui  23:27:20
现在市长更上任
Smallrui  23:27:25
全国都没有。。。。。
Smallrui  23:27:33
这是我这个不聪明的脑袋瓜想到的
Smallrui  23:27:39
我想出一个商业计划书
小小大人物  23:27:42
哇哦……那就酷了
Smallrui  23:27:53

小小大人物  23:28:09
又耍酷啊
Smallrui  23:28:18
呵呵 这个问题，也是一个重心
Smallrui  23:28:25
今年的我初步打算攻这个
小小大人物  23:28:41
可以试试
Smallrui  23:28:45
哥今年的计划书 妞都看到 preview 版本了 
Smallrui  23:28:58
呵呵 这关系亲吧 让咱先知道 
小小大人物  23:29:07
。。。
小小大人物  23:29:16
我当然要知道啊
Smallrui  23:29:39
现在海康正在给重庆建一个出租车的监控。
Smallrui  23:29:47
这个项目资金是5000万
Smallrui  23:29:57
一帮傻冒，哥要是搞 这是智能的
小小大人物  23:30:09
哇哦…………酷
Smallrui  23:30:11
所以 人才很重要，只有哥一个不行，哥只是一个框架师。
 

 上一篇  下一篇
 ```

 ```
 创建时间：2011年12月13日(星期二) 凌晨1:03 | 分类：未分类 | 字数：3907  | 另存为... | 打印 | 添加到日历
//
// Copyright (c) 2011 all rights reserved.
// brief  log util basic frame(wrapper log4cpp)
// author Rui.Sun <Smallrui@live.com>
// date   2011-9-12 21:29
//         moon's day
// date   2011-12-12 23:37
//         changed to c interface, ruisun
//
#include "log.h"

#ifdef HAVE_LOG

#include <log4cpp/Category.hh>
#include <log4cpp/BasicLayout.hh>
#include <log4cpp/PatternLayout.hh>
#include <log4cpp/Priority.hh>
#include <log4cpp/FileAppender.hh>
#include <log4cpp/RollingFileAppender.hh>
#include <log4cpp/OstreamAppender.hh>
#include <log4cpp/Win32DebugAppender.hh>

#include <stdio.h>
#include <assert.h>
#include "posixtime.h"

using namespace std;

#ifdef WIN32
#if defined(DEBUG) || defined(_DEBUG)
#pragma comment(lib, "log4cppD.lib")
#else
#pragma comment(lib, "log4cpp.lib")
#endif
#endif

typedef struct t_log_func_ptr
{
 char function[260];
 int line;
 int tick_time;
} log_func_ptr;

#define getRoot() log4cpp::Category::getRoot()

log_priority g_priority = PRIORITY_DEBUG;
static bool g_enable_log = true;

int64_t get_time_day();
bool isDebug();

bool log_init(log_appender appender_type, const char * appender_name, const char * file_name)
{
 log4cpp::PatternLayout * pLayout = new log4cpp::PatternLayout();
 pLayout->setConversionPattern("%d : %p : %m%n");
 log4cpp::Appender * appender;

 if (appender_type == FILE_APPENDER)
 {
  appender = new log4cpp::FileAppender(appender_name, file_name);
 }
 else if (appender_type == ROLLING_FILE_APPENDER)
 {
  appender = new log4cpp::RollingFileAppender(appender_name, file_name);
 }
 else if (appender_type == OSTREAM_APPENDER)
 {
  appender = new log4cpp::OstreamAppender(appender_name, &cout);
 }
 else if (appender_type == WIN32_DEBUG_APPENDER)
 {
  appender = new log4cpp::Win32DebugAppender(appender_name);
 }

 if (appender == NULL)
 {
  assert(false);
  return false;
 }

 appender->setLayout(pLayout);
 getRoot().addAppender(appender);

 return true;
}

void log_set_priority(log_priority priority)
{
 getRoot().setPriority(priority);
}

void log_enable_output(bool enable)
{
 g_enable_log = enable;
}

void log_error(const char * fmt, ...)
{
 if (!isDebug())
 {
  return;
 }

 char buf[1024];
 va_list args;

 va_start(args, fmt);
 vsprintf(buf, fmt, args);
 getRoot().error(buf);
}

void log_warn(const char * fmt, ...)
{ 
 if (!isDebug())
 {
  return;
 }

 char buf[1024];
 va_list args;

 va_start(args, fmt);
 vsprintf(buf, fmt, args);
 getRoot().warn(buf);
}

void log_info(const char * fmt, ...)
{
 if (!isDebug())
 {
  return;
 }

 char buf[1024];
 va_list args;

 va_start(args, fmt);
 vsprintf(buf, fmt, args);
 getRoot().info(buf);
}

void log_debug(const char * fmt, ...)
{
 if (!isDebug())
 {
  return;
 }

 char buf[1024];
 va_list args;

 va_start(args, fmt);
 vsprintf(buf, fmt, args);
 getRoot().debug(buf);
}

void log_close()
{
 log4cpp::Category::shutdown();
}

log_handle log_function_enter(const char * file, const char * func, int line)
{
 log_func_ptr * _log_handle = (log_func_ptr *)malloc(sizeof(log_func_ptr));
 const char * filename = NULL;

#ifdef WIN32
 filename = strrchr(file, '\\') + 1;
#else
 filename = strrchr(file, '/') + 1;
#endif

 assert(_log_handle != NULL);
 assert(filename != NULL);

 sprintf(_log_handle->function, "%s(%s)", filename, func);
 _log_handle->line = line;
 _log_handle->tick_time = get_time_day();

 log_debug("%s(%d)...", _log_handle->function, line);

 return _log_handle;
}

void log_function_leave(log_handle handle)
{
 log_func_ptr * _log_handle = (log_func_ptr *)handle;
 int64_t elapse_time;

 assert(_log_handle != NULL);
 elapse_time = get_time_day() - _log_handle->tick_time;

 log_debug("~%s...elapsed time(%d)", _log_handle->function, elapse_time);

 free(_log_handle);
}

int64_t get_time_day()
{
 struct timeval tv;
 gettimeofday(&tv,NULL);

 return (int64_t)tv.tv_sec * 1000 + tv.tv_usec / 1000;
}

bool isDebug()
{
 return g_enable_log;
}

#endif // HAVE_LOG


 上一篇  下一篇
 ```
